flush.console()
}
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
data <- get24HrWaterLevelData(station, startDateTime, currentTime)
cat("Detecting BD Problem...\n")
flush.console()
str(data)
bdProblem <- searchBoundaryProblem(data)
cat("Writing Logs...\n")
flush.console()
# updateBoundaryProblem(bdProblem)
cat("Update latest runtime...\n")
flush.console()
# latestTime <- max(as.POSIXct(problem$end_datetime))
# updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
cat("DONE!...\n")
flush.console()
}
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
if(nrow(bdProblem > 0)) {
str(bdProblem)
}
cat("Writing Logs...\n")
flush.console()
# updateBoundaryProblem(bdProblem)
cat("Update latest runtime...\n")
flush.console()
# latestTime <- max(as.POSIXct(problem$end_datetime))
# updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
cat("DONE!...\n")
flush.console()
}
data <- get24HrWaterLevelData("CHI001", endDateTime = as.POSIXct("2012-02-28"))
data
searchBoundaryProblem(data)
nrow(data)
length(data)
data[,]
data[0,]
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
if(nrow(bdProblem > 0)) {
str(bdProblem)
}
cat("Writing Logs...\n")
flush.console()
# updateBoundaryProblem(bdProblem)
cat("Update latest runtime...\n")
flush.console()
# latestTime <- max(as.POSIXct(problem$end_datetime))
# updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
cat("DONE!...\n")
flush.console()
}
data
data$max_bank <- mapply(getMaxBank, data$left_bank, data$right_bank)
hasBoundaryProblem <- mapply(isOutOfBound, data$water1, data$ground_level, data$max_bank)
if(nrow(data) > 0) {
bd <- data[hasBoundaryProblem,]
} else {
bd <- data[0,]
}
bd$datetime <- mapply(paste, bd$date, bd$time)
bd
data
names(data)
data$max_bank <- mapply(getMaxBank, data$left_bank, data$right_bank)
hasBoundaryProblem <- mapply(isOutOfBound, data$water1, data$ground_level, data$max_bank)
hasBoundaryProblem
bd <- NA
if(nrow(data) > 0) {
bd <- data[hasBoundaryProblem,]
} else {
bd <- data[0,]
}
bd
bd$datetime <- mapply(paste, bd$date, bd$time)
bdProblem <- data.frame(station_code = bd$code,
type = "WATER_BD",
start_datetime = bd$datetime,
end_datetime = bd$datetime,
num = 1
)
bd$code
bd
bdProblem <- data.frame(station_code = bd$code,
start_datetime = bd$datetime,
end_datetime = bd$datetime,
num = 1
)
bdProblem <- data.frame(station_code = bd$code,
start_datetime = bd$datetime,
end_datetime = bd$datetime,
)
bdProblem <- data.frame(station_code = bd$code,
start_datetime = bd$datetime,
end_datetime = bd$datetime
)
bdPro
bdProblem
bd
data.frame(a)
data.frame(q)
data.frame(q=NA
)
data.frame(q=c())
bdProblem <- data.frame(station_code = c(),
type = c(),
start_datetime = c(),
end_datetime = c(),
num = c())
bdProblem
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
str(bdProblem)
cat("Writing Logs...\n")
flush.console()
if(!is.na(bdProblem)) {
# updateBoundaryProblem(bdProblem)
cat("Update latest runtime...\n")
flush.console()
# latestTime <- max(as.POSIXct(problem$end_datetime))
# updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
}
cat("DONE!...\n")
flush.console()
}
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
str(bdProblem)
cat("Writing Logs...\n")
flush.console()
if(!is.na(bdProblem)) {
# updateBoundaryProblem(bdProblem)
cat("Update latest runtime...\n")
flush.console()
# latestTime <- max(as.POSIXct(problem$end_datetime))
# updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
}
cat("DONE!...\n")
flush.console()
}
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
str(bdProblem)
cat("Writing Logs...\n")
flush.console()
if(!is.na(bdProblem)) {
# updateBoundaryProblem(bdProblem)
cat("Update latest runtime...\n")
flush.console()
# latestTime <- max(as.POSIXct(problem$end_datetime))
# updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
}
cat("DONE!...\n")
flush.console()
break
}
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
str(bdProblem)
if(!is.na(bdProblem)) {
cat("Writing Logs...\n")
flush.console()
# updateBoundaryProblem(bdProblem)
cat("Update latest runtime...\n")
flush.console()
# latestTime <- max(as.POSIXct(problem$end_datetime))
# updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
} else {
cat("Problem not found...")
}
cat("DONE!...\n")
flush.console()
break
}
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
str(bdProblem)
if(!is.na(bdProblem)) {
cat("Writing Logs...\n")
flush.console()
# updateBoundaryProblem(bdProblem)
cat("Update latest runtime...\n")
flush.console()
# latestTime <- max(as.POSIXct(problem$end_datetime))
# updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
} else {
cat("Problem not found...\n")
}
cat("DONE!...\n")
flush.console()
break
}
str(NA)
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
data <- NA
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
str(bdProblem)
if(!is.na(bdProblem)) {
cat("Writing Logs...\n")
flush.console()
updateBoundaryProblem(bdProblem)
} else {
cat("Problem not found...\n")
}
cat("Update latest runtime...\n")
flush.console()
latestTime <- max(as.POSIXct(data$end_datetime))
updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
cat("DONE!...\n")
flush.console()
}
data
data$end_datetime
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
data <- NA
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
str(bdProblem)
if(!is.na(bdProblem)) {
cat("Writing Logs...\n")
flush.console()
updateBoundaryProblem(bdProblem)
} else {
cat("Problem not found...\n")
}
cat("Update latest runtime...\n")
flush.console()
end_datetime <- mapply(paste, data$date, data$time)
latestTime <- max(as.POSIXct(end_datetime))
updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
cat("DONE!...\n")
flush.console()
}
end_datetime <- mapply(paste, data$date, data$time)
end_datetime
data
source('datalog.R')
source('boundary.R')
problemType <- "WATER_BD"
stationList <- getStationCodeList();
currentTime <- Sys.time()
data <- NA
for(station in stationList) {
cat("==========[ STATION:")
cat(station)
cat(" ]==========\n")
flush.console()
cat("Getting latest run time...\n")
flush.console()
startDateTime <- getLatestBoundaryProblemRunTime(station, problemType)
if(!is.na(startDateTime)) {
startDateTime <- startDateTime + 1
}
str(startDateTime)
cat("Loading 24hr data...\n")
flush.console()
# data <- get24HrWaterLevelData(station, startDateTime, currentTime)
data <- get24HrWaterLevelData(station, endDateTime = as.POSIXct("2012-02-28"))
str(data)
if(nrow(data) > 0) {
cat("Detecting BD Problem...\n")
flush.console()
bdProblem <- searchBoundaryProblem(data)
str(bdProblem)
if(!is.na(bdProblem)) {
cat("Writing Logs...\n")
flush.console()
updateBoundaryProblem(bdProblem)
} else {
cat("Problem not found...\n")
}
cat("Update latest runtime...\n")
flush.console()
end_datetime <- mapply(paste, data$date, data$time)
latestTime <- max(as.POSIXct(end_datetime))
updateLatestBoundaryProblemRunTime(station, problemType, latestTime)
} else {
cat("No data...\n")
}
cat("DONE!...\n")
flush.console()
}
print(Sys.time())
print(strftime(Sys.time()))
cat(strftime(Sys.time()))
